<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Document</title>
</head>
<body>
  {volist name="students" id="vo"}
<button type="button" class="btn btn-success ra">
      <span id="{$vo.id}" class="glyphicon glyphicon-thumbs-up up"></span>&nbsp;<span class="numup">{$homework->id,$vo.id|upnum=###}</span>
</button>
{/volist}

<script type="text/javascript" src="__STATIC__/assets/js/bootbox.js"></script>
<script type="text/javascript">
    $().ready(function(){

        $(".up").click(function() {

            var Oa=$(this);
            var id=Oa.attr('id');//获取id属性
           var vl= Oa.next(".numup").text();

            hid=$("#hid").val()
            vl=parseInt(vl)+1;

            $.ajax({
                url: "{:url('student/up')}",
                data: {
                    sid:id, 
                    hid:hid, 
                },
                async: true,   //是否为异步请求
                cache: false,  //是否缓存结果
                type: "POST", //请求方式为POST
                dataType: "json",   //服务器返回的数据是什么类型
                success: function(data){  
                     var data = JSON.parse(data);
                      if(data.status==1){ 
                         bootbox.alert({ size: "small", title: "点赞成功",  message:data.info  });
                            Oa.next(".numup").text(vl);
                           
                        }
                       else{
                        bootbox.alert({ size: "small", title: "点赞失败",  message:data.info  });
                    }
                }
              });
        });
  });
</body>
</html>